<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="zh">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="Keywords" content="简单的XHTML页面" />
	<meta name="Description" content="这是一个简单的XHTML页面" />
	<title>简单的XHTML页面</title>
	<script type="text/javascript" src='http://cn.yimg.com/i/yui/3.0.0b1/build/yui/yui-min.js'></script>
	<style>
	#t1 {background:green;height:20px;width:0px;}
	#t2 {background:blue;height:20px;width:0px;}
	</style>
</head>
<body  class="yui-skin-sam">


<button id="b1">执行过程a</button>
<button id="b2">stop过程a</button>
<br />
<button id="b3">执行过程b</button>
<button id="b4">stop过程b</button>
<br />
<button id="b5">同时执行ab</button>
<button id="b6">clear</button>
<div id="t1"></div>
<div id="t2"></div>

</body>
<script>
<!--

YUI({
	modules:{
		'node-timer':{
			fullpath:'node-timer.js',
			requires:['node','dom']
		}
	},
	debug : true, filter : 'raw'
}).use('node-timer','console',function(Y){

	new Y.Console().render();

	//初始化nodes
	var initNodeTimer = function(){
		for(var i = 0 ;i< arguments.length;i++){
			arguments[i].everyTime(10,function(node){
				//debugger;
				var _width = Number(node.getStyle('width').replace('px',''));
				if(_width >= 500)return false;	
				node.setStyle('width',(_width+1).toString()+'px').set('innerHTML',(_width+1).toString());			
			},false);
		}
	};

	var node1 = Y.Node.get('#t1');
	var node2 = Y.Node.get('#t2');

	initNodeTimer(node1,node2);

	//debugger;

	Y.Node.get('#b1').on('click',function(e){//执行过程a
		e.halt();
		node1.startTimer();
		Y.log('过程1启动');
	});
	Y.Node.get('#b2').on('click',function(e){//stop过程a
		e.halt();
		node1.stopTimer();
		Y.log('过程1停止');
	});
	Y.Node.get('#b3').on('click',function(e){//执行过程b
		e.halt();
		node2.startTimer();
		Y.log('过程2启动');
	});
	Y.Node.get('#b4').on('click',function(e){//stop过程b
		e.halt();
		node2.stopTimer();
		Y.log('过程2停止');
	});
	Y.Node.get('#b5').on('click',function(e){//t同时执行过程ab
		e.halt();
		node1.startTimer();
		node2.startTimer();
		Y.log('过程1启动');
		Y.log('过程2启动');
	});
	Y.Node.get('#b6').on('click',function(e){//clear
		e.halt();
		node1.set('innerHTML','').setStyle('width','0px').stopTimer();
		node2.set('innerHTML','').setStyle('width','0px').stopTimer();
		Y.log('过程1清零');
		Y.log('过程2清零');
	});
});

/*
Concurrent.Thread.create(hello);
Concurrent.Thread.create(hello);
*/

//-->
</script>

</html>
